-- Licensed under the Unlicense. --
local a={}local string,table=string,table;local b=12;local c=16-b;local d=1<<b;local e=1<<c;local f=3;function a.compress(g)local h,i=1,{}local j=''local function k()for l=e+f-1,f,-1 do local m=string.sub(g,h,h+l-1)local n=string.find(j,m,1,true)if n then return n,m end end end;while h<=#g do local o,p=0,{}for l=0,7 do if h<=#g then local n,m=k()if n and#m>=f then local q=n-1<<c|#m-f;p[#p+1]=string.pack('>I2',q)else o=o|(1<<l)m=string.sub(g,h,h)p[#p+1]=m end;j=string.sub(j..m,-d)h=h+#m else break end end;if#p>0 then i[#i+1]=string.char(o)i[#i+1]=table.concat(p)end end;return table.concat(i)end;function a.decompress(g)local h,i=1,{}local j=''while h<=#g do local o=string.byte(g,h)h=h+1;for l=1,8 do local m=nil;if o&1~=0 then if h<=#g then m=string.sub(g,h,h)h=h+1 end else if h+1<=#g then local q=string.unpack('>I2',g,h)h=h+2;local n=q>>c+1;local r=q&e-1+f;m=string.sub(j,n,n+r-1)end end;o=o>>1;if m then i[#i+1]=m;j=string.sub(j..m,-d)end end end;return table.concat(i)end;return a
