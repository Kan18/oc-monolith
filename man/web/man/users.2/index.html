<html><title>man/users.2</title><body><div style="width:80ch;"><pre><span style="font-weight:bold;">NAME</span>
        users - kernel-level user management API

<span style="font-weight:bold;">DESCRIPTION
        users</span> (<span style="font-weight:bold;">kernel.users</span> in the environment provided to <span style="font-weight:bold;">init</span>(<span style="font-weight:bold;">1</span>)) is Monolith's user management API.  The version provided to <span style="font-weight:bold;">init</span> is largely a shell, and is later complemented by the userspace API <span style="font-weight:bold;">users</span>(<span style="font-weight:bold;">3</span>).  Note that the kernel-based <span style="font-weight:bold;">users</span> API does NOT resolve usernames to UIDs; for that, see <span style="font-weight:bold;">users</span>(<span style="font-weight:bold;">3</span>).

        <span style="font-weight:bold;">kernel.users</span> is not directly accessible from user programs.

<span style="font-weight:bold;">METHODS
        authenticate</span>(<span style="font-weight:bold;">uid</span>:<span style="color:0xFFFF00;">number</span>, <span style="font-weight:bold;">password</span>:~string&): <span style="color:0xFF00FF;">boolean</span>[, ~string&]
                Attempts to authenticate the current process as <span style="color:0xFFFF00;">uid</span>.  Returns <span style="color:0xFF00FF;">true</span> on success, <span style="color:0xFF00FF;">false</span> and an error message on failure.

        <span style="font-weight:bold;">login</span>(<span style="font-weight:bold;">uid</span>:<span style="color:0xFFFF00;">number</span>, <span style="font-weight:bold;">password</span>:~string&): <span style="color:0xFF00FF;">boolean</span>[, ~string&]
                Attempts to login the current process as <span style="color:0xFFFF00;">uid</span>. Returns <span style="color:0xFF00FF;">true</span> on success, <span style="color:0xFF00FF;">false</span> and an error message on failure.

        <span style="font-weight:bold;">uid</span>(): <span style="color:0xFFFF00;">number</span>
                Returns the current UID.

        <span style="font-weight:bold;">add</span>(<span style="font-weight:bold;">password</span>:~string&[, <span style="font-weight:bold;">cansudo</span>:<span style="color:0xFF00FF;">boolean</span>]): <span style="color:0xFFFF00;">number</span> or <span style="font-weight:bold;">nil</span>, ~string&
                Attempts to add a user, returning the new user's UID.  Only the root user can perform this function.

        <span style="font-weight:bold;">del</span>(<span style="font-weight:bold;">uid</span>:<span style="color:0xFFFF00;">number</span>): <span style="color:0xFF00FF;">boolean</span> or <span style="font-weight:bold;">nil</span>, ~string&
                Attempts to delete user <span style="color:0xFFFF00;">uid</span>.  Only the root user can perform this function.

        <span style="font-weight:bold;">sudo</span>(<span style="font-weight:bold;">func</span>:<span style="color:0x00AAFF;"></span>, <span style="font-weight:bold;">uid</span>:<span style="color:0xFFFF00;">number</span>, <span style="font-weight:bold;">password</span>:~string&): <span style="color:0xFF00FF;">boolean</span>, <span style="color:0xFF00FF;">boolean</span>, ... or <span style="font-weight:bold;">nil</span>, ~string&
                Attempts to execute function <span style="color:0x00AAFF;"></span> as user <span style="color:0xFFFF00;">uid</span>.  ~password& should be the current user's password.

                On success, returns <span style="color:0xFF00FF;">true</span> and the first two results from <span style="font-weight:bold;">pcall</span>(<span style="color:0x00AAFF;"></span>).

<span style="font-weight:bold;">NOTES</span>
        All <span style="font-weight:bold;">users</span> functions are overwritten in userspace by the <span style="font-weight:bold;">users</span>(<span style="font-weight:bold;">3</span>) API.  This API is usually only relevant to kernel or <span style="font-weight:bold;">init</span>(<span style="font-weight:bold;">1</span>,<span style="font-weight:bold;">5</span>) development.

<span style="font-weight:bold;">COPYRIGHT
        Monolith Kernel Interfaces</span> (c) 2020 Ocawesome101 under the GNU GPLv3.

<span style="font-weight:bold;">SEE ALSO
        usermgr</span>(<span style="font-weight:bold;">1</span>), <span style="font-weight:bold;">users</span>(<span style="font-weight:bold;">3</span>), <span style="font-weight:bold;">init</span>(<span style="font-weight:bold;">1</span>), <span style="font-weight:bold;">init</span>(<span style="font-weight:bold;">5</span>)

</pre></div></body></html>